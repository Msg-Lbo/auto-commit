# 📖 使用指南

## ✅ 已完成的改进

### 1. 🇨🇳 完全中文化
- 所有用户界面文字改为中文
- 错误提示信息中文化
- 配置项描述中文化

### 2. ⚙️ 新增配置项
- **系统提示词** (`auto-commit.systemPrompt`): 定义AI的角色和行为
- **用户提示词模板** (`auto-commit.userPromptTemplate`): 支持变量替换的提示词模板

### 3. 📍 多位置按钮
由于VSCode的限制，消息输入框内的按钮需要实验性API，现在按钮出现在：

- **状态栏** (主要位置)
- **源代码控制标题栏**
- **变更文件右键菜单**
- **快捷键**: `Ctrl+Shift+Alt+G`

## 🎯 使用方法

### 配置设置
在VSCode设置中配置以下项目：

```json
{
  "auto-commit.deepseekApiKey": "your-api-key",
  "auto-commit.systemPrompt": "你是一个专业的Git提交消息生成助手...",
  "auto-commit.userPromptTemplate": "请为以下代码变更生成一个提交消息：\n\n文件变更：\n{files}\n\n变更详情：\n{changes}\n\n历史提交消息参考：\n{history}\n\n请生成一个简洁、准确的提交消息，只返回消息内容，不要其他解释。"
}
```

### 生成提交消息
1. **状态栏按钮**: 点击底部状态栏的 "✨ 生成提交消息"
2. **源代码控制**: 在源代码控制视图标题栏点击按钮
3. **快捷键**: 按 `Ctrl+Shift+Alt+G`
4. **命令面板**: `Ctrl+Shift+P` 搜索 "生成提交消息"

## 🔧 配置项详解

### 系统提示词 (systemPrompt)
定义AI助手的角色和基本行为规则。在VSCode设置中以**多行文本框**形式编辑：

**设置路径**: `auto-commit.systemPrompt`
**编辑方式**: 多行文本框（textarea）
**默认值**:
```
你是一个专业的Git提交消息生成助手。请根据代码变更生成简洁、准确的提交消息。遵循约定式提交格式（feat:, fix:, docs:, style:, refactor:, test:, chore:）。提交消息的第一行应控制在72个字符以内。
```

### 用户提示词模板 (userPromptTemplate)
支持变量替换的提示词模板，在VSCode设置中以**多行文本框**形式编辑。

**设置路径**: `auto-commit.userPromptTemplate`
**编辑方式**: 多行文本框（textarea）
**支持变量**:
- `{files}`: 变更文件列表
- `{changes}`: 详细变更内容
- `{history}`: 历史提交消息参考

**默认模板**:
```
请为以下代码变更生成一个提交消息：

文件变更：
{files}

变更详情：
{changes}

历史提交消息参考：
{history}

请生成一个简洁、准确的提交消息，只返回消息内容，不要其他解释。
```

## 🎨 按钮位置说明

### 1. 状态栏 (推荐)
```
VSCode底部状态栏：
┌─────────────────────────────────────────┐
│ ✨ 生成提交消息  │ 分支: main │ 错误: 0 │
└─────────────────────────────────────────┘
```

### 2. 源代码控制标题栏
```
┌─────────────────────────────────────────┐
│ 源代码控制                            ✨│
├─────────────────────────────────────────┤
```

### 3. 变更文件右键菜单
在源代码控制视图中，右键点击变更文件可看到"生成提交消息"选项。

## 🚀 工作流程

1. **修改文件** → 文件出现在源代码控制视图
2. **点击按钮** → 选择任一位置的按钮
3. **AI分析** → 自动分析文件变更和历史格式
4. **生成消息** → 使用DeepSeek API生成提交消息
5. **自动填入** → 消息自动填入输入框或复制到剪贴板

## 🔍 故障排除

### 按钮不显示？
- 确保在Git仓库中
- 重新加载窗口 (`Ctrl+R`)
- 检查状态栏是否有按钮

### 无法生成消息？
- 检查API Key配置
- 确保有文件变更
- 查看错误提示信息

### 消息无法填入？
- 插件会自动提供复制选项
- 手动复制粘贴到输入框

## 📝 注意事项

- 由于VSCode API限制，无法直接在消息输入框内添加按钮
- 状态栏按钮是最便捷的访问方式
- 支持快捷键快速访问
- 所有提示信息已完全中文化
